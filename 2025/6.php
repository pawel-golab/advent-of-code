<?php

$lines = file('input6.txt', FILE_IGNORE_NEW_LINES);

/**
 * operations in each column (extracted from input file)
 */
$operations = ['+', '+', '+', '*', '+', '+', '+', '*', '+', '+', '*', '+', '*', '*', '+', '*', '+', '*', '+', '+', '*', '*', '*', '*', '+', '+', '*', '+', '+', '*', '*', '+', '*', '+', '*', '*', '*', '+', '*', '*', '*', '*', '*', '+', '+', '+', '*', '+', '*', '+', '+', '*', '+', '*', '*', '*', '*', '*', '+', '+', '*', '*', '+', '+', '+', '+', '*', '+', '*', '*', '*', '*', '+', '*', '+', '+', '*', '*', '*', '+', '+', '+', '*', '*', '*', '+', '*', '+', '+', '+', '*', '*', '*', '*', '*', '+', '+', '+', '+', '*', '*', '+', '+', '*', '+', '+', '+', '*', '*', '+', '+', '*', '*', '+', '*', '*', '*', '*', '*', '+', '+', '+', '+', '*', '*', '+', '*', '+', '*', '+', '+', '+', '*', '*', '+', '*', '*', '+', '+', '+', '*', '*', '*', '+', '*', '+', '*', '+', '+', '*', '*', '+', '+', '*', '+', '+', '*', '+', '*', '*', '+', '+', '*', '*', '*', '*', '+', '*', '*', '*', '*', '+', '*', '+', '+', '*', '*', '+', '+', '*', '+', '+', '+', '+', '*', '*', '+', '*', '+', '+', '+', '*', '*', '+', '*', '+', '+', '+', '+', '+', '+', '*', '+', '*', '*', '+', '*', '*', '+', '+', '+', '+', '*', '*', '+', '+', '*', '+', '+', '+', '*', '+', '*', '+', '*', '*', '*', '*', '+', '+', '*', '*', '+', '+', '+', '+', '*', '*', '+', '+', '*', '*', '*', '+', '+', '*', '*', '*', '+', '*', '+', '+', '+', '*', '*', '*', '+', '+', '*', '+', '+', '*', '+', '*', '+', '+', '+', '+', '+', '*', '*', '+', '+', '+', '+', '*', '+', '*', '*', '*', '+', '*', '*', '*', '*', '*', '*', '*', '+', '*', '+', '+', '+', '+', '*', '*', '+', '+', '*', '*', '*', '*', '*', '*', '+', '+', '+', '*', '*', '+', '+', '*', '*', '*', '+', '+', '+', '*', '*', '+', '*', '*', '+', '*', '*', '+', '*', '+', '*', '*', '+', '+', '*', '*', '*', '+', '+', '+', '+', '+', '+', '+', '+', '+', '*', '+', '+', '*', '*', '*', '*', '*', '+', '*', '*', '*', '+', '*', '*', '+', '*', '*', '*', '+', '*', '+', '+', '*', '+', '+', '+', '+', '*', '*', '+', '*', '*', '+', '*', '*', '*', '+', '*', '+', '+', '*', '*', '+', '*', '*', '*', '+', '+', '+', '+', '+', '*', '+', '+', '+', '+', '*', '+', '*', '+', '+', '*', '+', '+', '+', '*', '+', '+', '*', '+', '*', '*', '+', '+', '*', '+', '+', '+', '*', '+', '*', '*', '+', '+', '+', '*', '*', '*', '+', '+', '*', '*', '*', '+', '*', '*', '+', '*', '*', '*', '*', '+', '+', '*', '+', '+', '*', '*', '*', '*', '+', '*', '+', '+', '*', '+', '+', '*', '*', '+', '+', '+', '*', '+', '+', '+', '*', '+', '+', '+', '*', '+', '+', '*', '*', '+', '*', '*', '*', '+', '+', '+', '+', '*', '+', '*', '+', '+', '+', '*', '+', '*', '*', '*', '+', '*', '+', '*', '+', '+', '*', '*', '+', '+', '*', '+', '*', '+', '+', '+', '+', '*', '*', '*', '+', '*', '+', '*', '*', '*', '+', '*', '*', '*', '+', '+', '+', '+', '*', '*', '*', '+', '*', '+', '*', '+', '*', '*', '+', '+', '+', '+', '*', '+', '*', '+', '+', '+', '+', '+', '*', '*', '*', '+', '*', '+', '+', '+', '*', '*', '+', '*', '+', '+', '*', '*', '*', '+', '+', '*', '*', '*', '*', '+', '*', '*', '+', '*', '+', '+', '+', '+', '*', '+', '*', '+', '*', '+', '+', '+', '*', '*', '*', '+', '*', '+', '+', '+', '+', '+', '*', '+', '+', '*', '+', '+', '*', '*', '+', '+', '+', '+', '+', '+', '*', '+', '+', '*', '*', '+', '+', '*', '+', '+', '*', '*', '*', '+', '*', '+', '+', '*', '+', '*', '*', '+', '+', '*', '*', '*', '+', '+', '+', '+', '*', '+', '*', '+', '*', '+', '*', '+', '*', '*', '+', '+', '+', '+', '*', '*', '+', '+', '*', '*', '*', '*', '+', '*', '*', '+', '*', '+', '+', '+', '*', '+', '+', '+', '+', '+', '*', '+', '+', '*', '+', '+', '*', '*', '+', '*', '*', '+', '+', '+', '*', '+', '+', '*', '+', '+', '+', '*', '+', '+', '+', '+', '*', '*', '+', '+', '+', '*', '*', '+', '*', '*', '+', '+', '+', '+', '*', '*', '*', '*', '+', '*', '+', '+', '*', '*', '*', '+', '*', '+', '*', '+', '*', '*', '*', '+', '*', '*', '+', '*', '*', '+', '+', '+', '+', '+', '*', '*', '+', '+', '+', '+', '*', '*', '+', '+', '*', '+', '+', '*', '*', '*', '+', '*', '*', '+', '*', '*', '+', '*', '+', '+', '*', '+', '+', '*', '*', '*', '+', '*', '+', '*', '*', '+', '*', '+', '+', '*', '+', '+', '+', '+', '*', '+', '+', '+', '*', '+', '+', '*', '*', '*', '+', '*', '*', '*', '*', '+', '+', '+', '+', '+', '+', '+', '+', '*', '*', '+', '*', '+', '*', '*', '*', '+', '+', '+', '*', '*', '*', '*', '+', '+', '*', '*', '+', '*', '*', '*', '*', '+', '+', '+', '*', '*', '+', '+', '+', '*', '+', '*', '+', '+', '*', '+', '+', '+', '+', '*', '*', '*', '+', '+', '+', '+', '+', '*', '+', '*', '+', '+', '+', '+', '*', '*', '*', '*', '+', '*', '+', '*', '*', '+', '*', '+', '+', '+', '+', '*', '+', '*', '+', '*', '+', '*', '+', '+', '+', '*', '*', '*', '+', '*', '*', '+', '+', '+', '+', '*', '*', '*', '+', '*', '+', '*', '*', '+', '*', '*', '*', '+', '*', '*', '+', '*', '+', '*', '*', '*', '+', '*', '+', '*', '+', '*', '*', '*', '+', '*', '*', '+', '+', '*', '*', '+', '*', '+', '+', '*', '+', '*', '+', '+', '*', '+', '*', '*', '+', '+', '*', '+', '*', '+', '+', '+', '+', '+', '+', '+', '*', '*', '*', '+', '+', '*', '*', '+', '+', '+', '*', '+', '*', '*', '+', '*', '*', '*', '+', '*', '+', '*', '+'];

/**
 * current results in each column,
 * start values are those of the last numbers line from file (pop returns last array element and deletes it from original array)
 */
$results = array_map(
    fn ($el) => (int)$el,                   // convert all values to int
    explode(' ', array_pop($lines))
);

$sum = 0;

foreach ($lines as $line) {
    $cols = explode(' ', $line);

    foreach ($cols as $i => $col) {
        if ($operations[$i] == '+')
            $results[$i] += (int)$col;
        else
            $results[$i] *= (int)$col;
    }
}

echo array_sum($results);

// 2466718 to low